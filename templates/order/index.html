{% extends "main_classic.html" %}
{% load paginator %}

{% block menu_order %}selected{% endblock %}

{% block sidebar %}
    <h3>Fournisseur</h3>
    {% for p in providers %}
        <a href="?provider={{ p.id }}">{{ p.name }}</a><br />
    {% endfor %}
{% endblock %}

{% block header %}Commandes{% endblock %}

{% block content %}

{% if orders %}
<table class="list">
  <thead>
    <th>Date</th>
    <th>Fournisseur</th>
    <th>Produits</th>
    <th>Utilisateur</th>
    <th>Statut</th>
  </thead>
  
  <tbody>
    {% for order in orders.object_list %}
      <tr class="{% cycle 'odd' 'even' %}">
        <td>{{ order.date_created|date }}</td>
        <td>{{ order.provider.name }}</td>
        <td>{{ order.products.all|join:", " }}</td>
        <td>{{ order.user.username }}</td>
        <td>{{ order.get_state_display }} (le {{ order.last_change|date }})</td>
      </tr>
    {% endfor %}
  </tbody>
</table>

{% pagination orders %}

{% else %}
    <p>Aucune commande en cours</p>
{% endif %}

<div class="cleaner"></div>
{% endblock %}
