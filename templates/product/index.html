{% extends "main_custom.html" %}
{% load paginator product_tags %}

{% block menu_product %}selected{% endblock %}

{% block buttons %}
<div class="btn_wrapper">
  <a href="{% url product_new %}" class="btn_big">
    <img src="{{ MEDIA_URL }}img/icons/add.png" />Créer un produit
  </a>
</div>

<div class="btn_wrapper">
  <a href="{% url cart_index %}" class="btn_big">
    <img src="{{ MEDIA_URL }}img/icons/basket.png" />Voir mon panier
  </a>
</div>
{% endblock %}

{% block content %}

{% if products %}

{# START: Filter box #}
<div id="content" style="min-height:0">
  <div id="content_header"><h2>Filtrer la liste des produits</h2></div>
  <form action="{% url product_index %}" method="get" accept-charset="utf-8" id="product_filter">
    <table>
      <tr>
        <td>
          Fournisseur:<br />
          {{ filter_form.providers }}
          <div class="cleaner"></div>
        </td>
        <td>
          Produit <strong>('<code>esc</code>' pour fermer la liste)</strong>:<br />
          {{ filter_form.product }}
          <div class="cleaner"></div>
        </td>
        <td>
          <input type="submit" value="Filtrer" />
        </td>
      </tr>
    </table>
    
        {#  #}
        {# <div class="btn_wrapper_left"> #}
        {#   <a href="#" id="submit_filter" class="btn_medium"> #}
        {#     <img src="{{ MEDIA_URL }}img/icons/table_gear.png" />Filtrer #}
        {#   </a> #}
        {# </div> #}
        {#  #}
        {# <div class="btn_wrapper_left"> #}
        {#   <a href="{% url product_index %}" class="btn_medium"> #}
        {#     <img src="{{ MEDIA_URL }}img/icons/table_refresh.png" />Réinitialiser #}
        {#   </a> #}
        {# </div> #}
  </form>
</div>
{# END: Filter box #}


{# START: Product list #}
<div id="content" style="min-height:0">
  <div id="content_header">
    <h2>Liste des produits - Page {{ products.number }} sur {{ products.paginator.num_pages }}.</h2>
  </div>
  
  {% pagination products %}
  <table class="list">
    <thead>
        <th>Fournisseur</th>
        <th>Nom du produit</th>
        <th>Conditionnement</th>
        <th>Référence</th>
        <th>Prix (en €)</th>
        <th>N° Offre</th>
        <th>Nomenclature</th>
        <th>MAJ</th>
        <th>Action</th>
    </thead>
    
    <tbody>
      {% for product in products.object_list %}
        <tr class="{% cycle 'even' 'odd' %}">
            <td>{{ product.provider.name }}</td>
            <td>
              <a href="{% url product_item product.id %}" class="edit" title="Editer">{{ product.name }}</a>
            </td>
            <td>{{ product.packaging }}</td>
            <td>{{ product.reference }}</td>
            <td>{{ product.price }}</td>
            <td>{{ product.offer_nb }}</td>
            <td>{{ product.nomenclature }}</td>
            <td>{{ product.last_change|date }}</td>
            <td>
              <a href="{% url product_add_cart product.id %}" class="cart_add">Ajouter&nbsp;au&nbsp;panier</a>
            </td>
        </tr>
      {% endfor %}
    </tbody>
    <tfoot>
      <tr>
        <td colspan="9">{% pagination products %}</td>
      </tr>
    </tfoot>
  </table>
</div>
{# END: Product list #}

{# START: Quantity Dialog #}
<div id="dialog-form" title="Quantité">

1
form>
  <fieldset>
    <label for="quantity">Quantité</label>
    <input type="text" name="quantity" class="text ui-widget-content ui-corner-all" />
  </fieldset>
</form>
</div>
{# END: Quantity Dialog #}
{% endif %}

{% endblock %}
